# WORKLOG

- Init consolidated repo.
- Implemented eBPF handshake correlation (Task 01):
	- Added TID-keyed cache with 2s TTL, metrics logging every 5s.
	- Metrics: eventsReceived, handshakesEmitted, correlationTimeouts, cacheEvictions, kernel_drops.
	- Output aggregated handshake JSONL to runtime.jsonl.
	- Commands:
		- cd carnot-agent/ebpf-core; make
		- cd go-loader && go build -o bin/carnot-ebpf-loader ./...
		- sudo ./bin/carnot-ebpf-loader -obj ../openssl_handshake.bpf.o -out runtime.jsonl -libssl /lib/x86_64-linux-gnu/libssl.so.3
		- curl -sS https://example.org >$null
	- Expected: runtime.jsonl lines containing pid, tid, sni, groups_offered, success; low kernel_drops & correlationTimeouts.
- Task 01b (Negotiated Group Extraction):
	- Added optional cgo shim (dlopen/dlsym) to call SSL_get_shared_group if exported.
	- Emits negotiated_group in handshake JSON when available.
	- Limitations: only dynamic libssl.so.3, skips statically linked or stripped symbols, pointer validity best-effort, hybrid group IDs placeholder mapping.
- Task 02 (Runtime â†’ CryptoBOM v2.1):
	- Implemented integrations/runtime/ebpf_to_bom.py converting runtime.jsonl handshakes into runtime.bom.json observations.
	- Adds bom_ref, counts unique SNIs, includes success flag & negotiated group.
	- Merge command (example):
		- python integrations/runtime/ebpf_to_bom.py --in artifacts/run1/runtime.jsonl --out artifacts/run1/runtime.bom.json --asset-id host:demo
		- carnot-merge artifacts/run1/static.bom.json artifacts/run1/runtime.bom.json artifacts/run1/aws.bom.json -o artifacts/run1/merged.json
